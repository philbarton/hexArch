Shared adapter code against different adapter implementations